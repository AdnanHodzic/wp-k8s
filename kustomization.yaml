apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
secretGenerator:
- name: mysql-root-pass
  literals:
  - password=REDACTED
- name: wp-db-host
  literals:
    - host=REDACTED
- name: wp-db-user
  literals:
    - password=REDACTED
- name: mysql-db-pass
  literals: 
    - password=REDACTED
- name: wp-db-name
  literals:
    - password=REDACTED
resources: 
  # Enable/uncomment if using RPI or any other setup then public cloud
  #- metallb-ingress-service.yaml
  # Reference: https://microk8s.io/docs/addon-metallb
  # Recommended use: ToDO: insert blog post/github repo for tf-bootsrap
  - metallb.yaml
  
  # Enable/uncomment if using nfs-server-k8s on public or private cloud
  #- nfs.yaml
  # Enable/uncomment if using RPI or any other setup then public cloud
  - nfs-synology.yaml
  # Enable/uncomment if you want to deploy MySQL cluster using MySQL operator
  #- mysql-cluster.yaml
  # Leave enabled/uncommented for both private and public cloud
  - wordpress-deployment.yaml
  # Enable/uncomment if you using public cloud (temp disabled for private)
  # - vpa.yaml
  # Warning: autoscaling/v2beta2 HorizontalPodAutoscaler is deprecated in v1.23+, unavailable in v1.26+; use autoscaling/v2 HorizontalPodAutoscaler
  - hpa.yaml
  # Enable/uncomment if using public cloud or if you using inlets-operator on
  # private cloud/RPI
  #- ingress.yaml

# References:
# wp-k8s: WordPress on privately hosted Kubernetes cluster (Raspberry Pi 4 + Synology): https://foolcontrol.org/?p=4004
# wp-k8s: WordPress on Kubernetes project (GKE, cloud SQL, NFS, cluster autoscaling, HPA, VPA, Ingress, Letâ€™s Encrypt): https://foolcontrol.org/?p=3754
# nfs-server-k8s: NFS server container image for Kubernetes: https://github.com/AdnanHodzic/nfs-server-k8s
